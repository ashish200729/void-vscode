# Requirements Document

## Introduction

This feature changes the chat layout in the SidebarChat component so that user messages and the input area appear at the top of the chat area, with AI responses flowing below. This is a UI/UX change to match the layout pattern shown in the reference images where the user's input is prominently displayed at the top.

## Glossary

- **Chat_Area**: The main container component that displays the conversation between user and AI
- **User_Message**: A message bubble displaying content submitted by the user
- **AI_Response**: A message bubble displaying content generated by the AI assistant
- **Input_Box**: The text input area where users type their messages
- **Scroll_Container**: The scrollable container that holds all chat messages

## Requirements

### Requirement 1: Top-Anchored User Input Display

**User Story:** As a user, I want my submitted message to appear at the top of the chat area, so that I can clearly see what I asked while the AI response streams below it.

#### Acceptance Criteria

1. WHEN a user submits a message, THE Chat_Area SHALL display the user message at the top of the visible chat content
2. WHEN the AI generates a response, THE Chat_Area SHALL display the response below the user message
3. WHEN multiple messages exist in a conversation, THE Chat_Area SHALL maintain chronological order with newest user messages appearing at the top of their respective conversation turn
4. WHILE the AI is streaming a response, THE Scroll_Container SHALL keep the user's original message visible at the top

### Requirement 2: Input Box Positioning

**User Story:** As a user, I want the input box to be positioned at the top of the chat area, so that I can easily see and access it.

#### Acceptance Criteria

1. THE Input_Box SHALL be rendered at the top of the Chat_Area component
2. WHEN the chat area loads, THE Input_Box SHALL be immediately visible without scrolling
3. WHEN a user submits a message, THE Input_Box SHALL remain at the top position
4. THE Input_Box SHALL maintain all existing functionality (image upload, model selection, submit/stop buttons)

### Requirement 3: Message Flow Direction

**User Story:** As a user, I want to see the conversation flow from top to bottom with my input at the top, so that the layout matches my mental model of asking a question and receiving an answer below.

#### Acceptance Criteria

1. WHEN displaying a conversation turn, THE Chat_Area SHALL render in this order: User_Message first, then AI_Response below
2. WHEN new content is added during streaming, THE Scroll_Container SHALL auto-scroll to show new content at the bottom
3. WHEN the user scrolls manually, THE Scroll_Container SHALL respect the user's scroll position and not auto-scroll
4. THE Chat_Area SHALL preserve the existing message grouping logic for tool calls and parallel operations

### Requirement 4: Visual Consistency

**User Story:** As a user, I want the new layout to maintain visual consistency with the existing design, so that the change feels natural and familiar.

#### Acceptance Criteria

1. THE User_Message bubble SHALL maintain its existing styling (background color, border radius, alignment)
2. THE AI_Response bubble SHALL maintain its existing styling
3. THE Chat_Area SHALL maintain existing spacing and padding between messages
4. THE Command_Bar (showing file changes) SHALL remain at the bottom of the chat area above the input when input is at bottom, or adapt appropriately to the new layout

### Requirement 5: Landing Page Behavior

**User Story:** As a user, I want the landing page to show the input prominently at the top when there are no messages, so that I know where to start.

#### Acceptance Criteria

1. WHEN no messages exist in the current thread, THE Chat_Area SHALL display the Input_Box at the top
2. WHEN no messages exist, THE Chat_Area SHALL display suggested prompts or previous threads below the input
3. WHEN transitioning from landing page to active chat, THE layout SHALL smoothly transition without jarring changes
